
Survey.Survey.cssType = "bootstrap";
Survey.defaultBootstrapCss.navigationButton = "btn btn-green";

Survey.JsonObject.metaData.addProperty("dropdown", {name: "renderAs", default: "standard", choices: ["standard", "imagepicker"]});

window.survey = new Survey.Model({ title: 'Ello Client Experience - Dear Ellotheans, please take a moment to do this survey. Please select any client/clients you feel are problematic. You can list each clients potential issues and then recommend a solution.', showProgressBar: 'top', pages: [{
    questions: [

        {
            type: "text",
            isRequired: true,
            name: "Email:"
        }



    ]},{ questions: [
  {
    type: "rating",
    name: "Agrimotion Consulting Pty (Ltd)",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Agrimotion Consulting Pty (Ltd)"
  },
  {
    type: "rating",
    name: "AHT Africa",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
        ],
    title: "AHT Africa"
  },
  {
    type: "rating",
    name: "Aqua Vista Guest House",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Aqua Vista Guest House"
  },
  {
    type: "rating",
    name: "Asara Wine Estate & Hotel (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
      ],
    title: "Asara Wine Estate & Hotel (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Beyerskloof Wines (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Beyerskloof Wines (Pty) Ltd"
  },

  {
    type: "rating",
    name: "Capital Harvest IT & Admin (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Capital Harvest IT & Admin (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Cavalli Wine and Stud (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
          ],
    title: "Cavalli Wine and Stud (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Crowe Horwarth RMA (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂'
          ],
    title: "Crowe Horwarth RMA (Pty) Ltd"
  },
  {
    type: "rating",
    name: "CSM Consulting Services (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'    ],
    title: "CSM Consulting Services (Pty) Ltd"
  },
  {
    type: "rating",
    name: "De Zalze Golf Club",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "De Zalze Golf Club"
  },
  {
    type: "rating",
    name: "De Zalze Lodge (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "De Zalze Lodge (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Devonvale Golf & Wine Estate",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Devonvale Golf & Wine Estate"
  },
  {
    type: "rating",
    name: "Dr Harold Bloch",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Dr Harold Bloch"
  },
  {
    type: "rating",
    name: "Dr MJ Abelson Inc",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
          ],
    title: "Dr MJ Abelson Inc"
  },
  {
    type: "rating",
    name: "Ello Technology SA (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
          ],
    title: "Ello Technology SA (Pty) Ltd"
  },

  {
    type: "rating",
    name: "Emma Pardoe CA (SA)",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Emma Pardoe CA (SA)"
  },
  {
    type: "rating",
    name: "Extreme Fibre Africa",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Extreme Fibre Africa"
  },
  {
    type: "rating",
    name: "Fincon Management Services CC",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Fincon Management Services CC"
  },

  {
    type: "rating",
    name: "Grande Provence Properties (PTY) LtdC",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "Grande Provence Properties (PTY) Ltd"
  },
  {
    type: "rating",
    name: "GS Productions",
    rateValues: [
       '👍',
      '👎',
      '🤷‍♂'
    ],
    title: "GS Productions"
  },


  {
    type: "rating",
    name: "Hazendal Wine Estate (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂'     ],
    title: "Hazendal Wine Estate (Pty) Ltd"
  },

  {
    type: "rating",
    name: "Helderberg Village Master Homeowners Assoc",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Helderberg Village Master Homeowners Assoc"
  },

  {
    type: "rating",
    name: "Helderberg Yamaha",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Helderberg Yamaha"
  },
  {
    type: "rating",
    name: "HGG Operations",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "HGG Operations"
  },
  {
    type: "rating",
    name: "HH NG Kerk",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "HH NG Kerk"
  },
 
  {
    type: "rating",
    name: "HKQS",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "HKQS"
  },
  {
    type: "rating",
    name: "Imalivest (PTY) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Imalivest (PTY) Ltd"
  },
  {
    type: "rating",
    name: "Imvusa Stainless (PTY) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Imvusa Stainless (PTY) Ltd"
  },
  {
    type: "rating",
    name: "Jacana Guest Farm",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Jacana Guest Farm"
  },
  {
    type: "rating",
    name: "Jade Properties",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Jade Properties"
  },
  {
    type: "rating",
    name: "Kanonkop Wine Estate",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Kanonkop Wine Estate"
  },
  {
    type: "rating",
    name: "King David Mowbray Golf Club",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "King David Mowbray Golf Club"
  },
  {
    type: "rating",
    name: "Land Rover Experience",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Land Rover Experience"
  },

  {
    type: "rating",
    name: "Lanicento",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Lanicento"
  },
  {
    type: "rating",
    name: "Le Franschhoek Hotel (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Le Franschhoek Hotel (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Marsh Green Risk Assurance (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Marsh Green Risk Assurance (Pty) Ltd"
  },

  {
    type: "rating",
    name: "MDOT Design Studio",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "MDOT Design Studio"
  },
  {
    type: "rating",
    name: "Metro Clean Services CC",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Metro Clean Services CC"
  },
  {
    type: "rating",
    name: "Mount Vernon - Gravel Junction Wine & Spirit",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Mount Vernon - Gravel Junction Wine & Spirit"
  },
  {
    type: "rating",
    name: "New Generation Church International",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "New Generation Church International"
  },
  {
    type: "rating",
    name: "Otto Wireless Solutions",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Otto Wireless Solutions"
  },
  {
    type: "rating",
    name: "Personal Touch Secretarial Services",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Personal Touch Secretarial Services"
  },
  {
    type: "rating",
    name: "Privatactus Incorporated",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Privatactus Incorporated"
  },
  {
    type: "rating",
    name: "Privatactus Incorporated",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Raymond McCreath Incorporated"
  },
    {
    type: "rating",
    name: "RDK Plant (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "RDK Plant (Pty) Ltd"
  },
  {
    type: "rating",
    name: "SA Inshore Fishing Industry Ass. T/A Feedcom",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "SA Inshore Fishing Industry Ass. T/A Feedcom"
  },
  {
    type: "rating",
    name: "Sanctuary Family Trust",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Sanctuary Family Trust"
  },
  {
    type: "rating",
    name: "Shibbolet Property Developments (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Shibbolet Property Developments (Pty) Ltd"
  },
  {
    type: "rating",
    name: "South African Disabled Golf Association",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "South African Disabled Golf Association"
  },
  {
    type: "rating",
    name: "Southern Fruit Growers",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Southern Fruit Growers"
  },
 
  {
    type: "rating",
    name: "Sparkle Tombstones and Counters",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Sparkle Tombstones and Counters"
  },
  {
    type: "rating",
    name: "Star Express CC",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Star Express CC"
  },
  {
    type: "rating",
    name: "Stellcap (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Stellcap (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Stellenbosch Hills (Co-Op) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Stellenbosch Hills (Co-Op) Ltd"
  },

  {
    type: "rating",
    name: "Steyl Panelbeaters",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Steyl Panelbeaters"
  },

  {
    type: "rating",
    name: "Switch Consultants (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Switch Consultants (Pty) Ltd"
  },

  {
    type: "rating",
    name: "Theebo Tech Pty Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Theebo Tech Pty Ltd"
  },
  {
    type: "rating",
    name: "Treasury Trust Services (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Treasury Trust Services (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Treoc Holding (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Treoc Holding (Pty) Ltd"
  },

  {
    type: "rating",
    name: "TUV Nord Southern Africa (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "TUV Nord Southern Africa (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Vecto Finance (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Vecto Finance (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Villiera Wines (Pty) Ltd",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Villiera Wines (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Vizier Systems (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Vizier Systems (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Wiehahn Property Management (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Wiehahn Property Management (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Winelands Golf Lodges Club (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Winelands Golf Lodges Club (Pty) Ltd"
  },
  {
    type: "rating",
    name: "Zimele Technologies",
    rateValues: [
     '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Zimele Technologies"
  },
  {
    type: "rating",
    name: "Zorgvliet Wines (Pty) Ltd",
    rateValues: [
      '👍',
      '👎',
      '🤷‍♂' 
    ],
    title: "Zorgvliet Wines (Pty) Ltd"
  },

]}
]});

    //survey.onComplete.add(function(result) {
	//document.querySelector('#surveyResult').innerHTML = "result: " + JSON.stringify(result.data);
    //});

var widget = {
    name: "imagepicker",
    isFit : function(question) { return question["renderAs"] === 'imagepicker'; },
    isDefaultRender: true,
    afterRender: function(question, el) {

        var $el = $(el).find("select");

        var options = $el.find('option');
        for (var i=1; i<options.length; i++) {
            $(options[i]).data("imgSrc", options[i].text);
            options[i].selected = question.value == options[i].value;
        }
        $el.imagepicker({
            hide_select : true,
            show_label  : false,
            selected: function(opts) {
                question.value = opts.picker.select[0].value;
            }
        })
    }

        ,
        willUnmount: function(question, el) {
            var $el = $(el).find("select");
            $el.data('picker').destroy();
        }

}

Survey.CustomWidgetCollection.Instance.addCustomWidget(widget);




ReactDOM.render(<Survey.Survey model={survey}/>, document.getElementById("surveyElement"));



window.surveyForceUpdate = function() {
    document.getElementById("surveyElement").innerHTML = "";

    ReactDOM.render(<Survey.Survey model={survey}/>, document.getElementById("surveyElement"));

}




survey.onComplete.add (function (result) {
// Initialize Firebase
    var config = {
        apiKey: "AIzaSyDNy5TZzKlvMPYQ9z9ER7s2A-GV1VyhsiI",
        authDomain: "customerrating-95674.firebaseapp.com",
        databaseURL: "https://customerrating-95674.firebaseio.com",
        projectId: "customerrating-95674",
        storageBucket: "customerrating-95674.appspot.com",
        messagingSenderId: "581072608517"

    };
    firebase.initializeApp(config);

    const preObject = document.getElementById('object');

    const dbRefObject = firebase.database().ref().child('object');

    dbRefObject.push().set(result.data);

    dbRefObject.on('value', snap => console.log(snap.val()));

});


